# pipenv-install-from-src

A repository to reproduce a bug in pipenv. To reproduce run:

```shell
docker build -t pipenv-install-from-src .
docker run -it pipenv-install-from-src
```

Result:

```shell
$ docker run -it pipenv-install-from-src
Traceback (most recent call last):
  File "main.py", line 1, in <module>
    import celery
ModuleNotFoundError: No module named 'celery'
```

Expected result:

```shell
$ docker run -it pipenv-install-from-src
it works
```

The Pipfile was generated by installing Celery directly from the GitHub repo:

```shell
pipenv install -e git+https://github.com/celery/celery.git@master\#egg\=celery
```

# Environment details

I am using the official pipenv Docker image.

Versions:

```shell
$ docker images
kennethreitz/pipenv latest eff4d2f39bf8 3 days ago 511MB
$ docker run -it pipenv-install-from-src pipenv --version
pipenv, version 2018.7.1
```

Support output:

<details><summary>$ pipenv --support</summary>

Pipenv version: `'2018.7.1'`

Pipenv location: `'/usr/local/lib/python3.6/dist-packages/pipenv'`

Python location: `'/usr/bin/python3'`

Other Python installations in `PATH`:

  - `3.6`: `/usr/bin/python3.6m`
  - `3.6`: `/usr/bin/python3.6`

  - `3.6.5`: `/usr/bin/python3`

PEP 508 Information:

```
{'implementation_name': 'cpython',
 'implementation_version': '3.6.5',
 'os_name': 'posix',
 'platform_machine': 'x86_64',
 'platform_python_implementation': 'CPython',
 'platform_release': '4.9.93-linuxkit-aufs',
 'platform_system': 'Linux',
 'platform_version': '#1 SMP Wed Jun 6 16:55:56 UTC 2018',
 'python_full_version': '3.6.5',
 'python_version': '3.6',
 'sys_platform': 'linux'}
```

System environment variables:

  - `PATH`
  - `HOSTNAME`
  - `TERM`
  - `LC_ALL`
  - `LANG`
  - `HOME`
  - `PYTHONDONTWRITEBYTECODE`
  - `PIP_PYTHON_PATH`

Pipenv–specific environment variables:


Debug–specific environment variables:

  - `PATH`: `/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin`
  - `LANG`: `C.UTF-8`


---------------------------

Contents of `Pipfile` ('/app/Pipfile'):

```toml
[[source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[packages]

[dev-packages]

[requires]
python_version = "3.7"

```


Contents of `Pipfile.lock` ('/app/Pipfile.lock'):

```json
{
    "_meta": {
        "hash": {
            "sha256": "7e7ef69da7248742e869378f8421880cf8f0017f96d94d086813baa518a65489"
        },
        "pipfile-spec": 6,
        "requires": {
            "python_version": "3.7"
        },
        "sources": [
            {
                "name": "pypi",
                "url": "https://pypi.org/simple",
                "verify_ssl": true
            }
        ]
    },
    "default": {},
    "develop": {}
}

```
</details>